<!--
============================================
; Title: EMS
; Author: Troy Martin
; Date: 05/18/2019
; Modified By: Troy Martin
; Description: List page for EMS application
;===========================================
-->
<!DOCTYPE html>
<html lang="en">
  <% include header %>
  <body class="body--padded">
    <% include navbar %>
    <main role="main">
      <div class="container">
        <h2><%= title %></h2>
        <!-- Test to see if the employees list exist and that it is an array-->
        <% if(employees && employees.length){ %>
          <a class="float-right" href="/new">Add new</a>
          <div class="table-responsive">
            <table class="table table-hover table-striped">
              <thead>
                <tr>
                  <th>First name</th>
                  <th>Last name</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <!-- Use the Array forEach to loop the list of employees -->
                <% employees.forEach(function(employee){ %>
                  <tr>
                    <td><%= employee.firstName %></td>
                    <td><%= employee.lastName %></td>
                    <td><a href="/view/<%= employee._id.toString() %>" class="btn btn-primary float-right"><i class="fas fa-pencil-alt"></i></a></td>
                  </tr>
                <% }) %>
              </tbody>
            </table>
          </div>
        <% } else{ %>
          <br><br>
          <p>No entries <a href="/new">add one!</a></p>
        <% } %>
      </div>
      <% include footer %>
    </main>
    <% include scripts %>
  </body>
</html>

